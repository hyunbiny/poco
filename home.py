#!/usr/bin/env python
# home.py â€• Streamlit ë©”ì¸ í˜ì´ì§€ (v2025-06-27)
#   â€¢ sidebarì— ë‹¨ê³„ë³„ í˜ì´ì§€ ë°”ë¡œê°€ê¸° ë²„íŠ¼
#   â€¢ í•„ìˆ˜ CSV ì¡´ì¬ ì—¬ë¶€Â·Python íŒ¨í‚¤ì§€Â·í™˜ê²½ ë³€ìˆ˜ ì ê²€
#   â€¢ ì²« ì‹¤í–‰ ì‹œ ì•ˆë‚´ ë©”ì‹œì§€Â·ë¦¬ì†ŒìŠ¤ ë§í¬ ì œê³µ

from __future__ import annotations
import os
from pathlib import Path
import importlib
import streamlit as st

###############################################################################
# 1. í˜ì´ì§€ ì„¤ì • & ê¸°ë³¸ ì •ë³´
###############################################################################
st.set_page_config(page_title="Poco Music DJ Toolkit", page_icon="ğŸ¶", layout="wide")
st.title("ğŸ¶ Poco Music DJ Toolkit â€“ í™ˆ")

with st.expander("â„¹ï¸ í”„ë¡œì íŠ¸ ê°œìš”", expanded=True):
    st.markdown(
        """
        ì´ ì•±ì€ **íƒ±ê³ Â·ë°œìŠ¤Â·ë°€ë¡±ê°€ DJ**ë¥¼ ìœ„í•œ ì˜¬-ì¸-ì› ì›Œí¬í”Œë¡œìš°ì…ë‹ˆë‹¤.

        | ë‹¨ê³„ | í˜ì´ì§€ | ì£¼ìš” ê¸°ëŠ¥ |
        |------|--------|----------|
        | â‘  | **ìë™ íƒœê·¸ ì •ë¦¬ (CSV) ìƒì„±** | ìŒì•… í´ë” â†’ `music_library_full.csv` ìë™ ìƒì„± |
        | â‘¡ | **ìŒì•… í•„í„°ë§ & íƒ„ë‹¤ êµ¬ì„±** | ë‹¤ì¤‘ í•„í„° + BPMÂ·ì¥ë¥´ íƒœê·¸ ë³´ì • & íƒ„ë‹¤ ë¹Œë” |
        | â‘¢ | **íƒ„ë‹¤ ìŠ¤ì¼€ì¤„ëŸ¬** | ZIP/JSON/M3U ë¶ˆëŸ¬ì˜¤ê¸° + í¸ì§‘|
        | â‘£ | **AI íƒ„ë‹¤ ì˜ê²¬** | AI ê¸°ë°˜ íƒ„ë‹¤ í”¼ë“œë°± |
        """,
        unsafe_allow_html=True,
    )

###############################################################################
# 2. Sidebar â€“ ë‹¨ê³„ë³„ í˜ì´ì§€ ë°”ë¡œê°€ê¸°
###############################################################################
st.sidebar.header("ğŸ“‘ í˜ì´ì§€ ë°”ë¡œê°€ê¸°")

PAGES = [
    ("pages/1_ìë™íƒœê·¸ì •ë¦¬íŒŒì¼ìƒì„±(csv).py", "â‘  ìë™ íƒœê·¸ ì •ë¦¬(csv) ìƒì„±", "ğŸ¼"),
    ("pages/2_ìŒì•…í•„í„°ë§.py",              "â‘¡ ìŒì•… í•„í„°ë§ ğŸ›ï¸",       "ğŸ›ï¸"),
    ("pages/3_íƒ„ë‹¤ìŠ¤ì¼€ì¤„ëŸ¬.py",            "â‘¢ íƒ„ë‹¤ ìŠ¤ì¼€ì¤„ëŸ¬ ğŸ“…",     "ğŸ“…"),
   ]

for path, label, icon in PAGES:
    if Path(path).exists():
        st.sidebar.page_link(path, label=f"{icon} {label}")
    else:
        st.sidebar.write(f"âŒ `{Path(path).name}` ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤")


###############################################################################
# 4. ì²«-ì‚¬ìš©ì ì•ˆë‚´
###############################################################################
if not st.session_state.get("first_visit_done"):
    st.success("ğŸ‰ ì•±ì´ ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤. ì™¼ìª½ ë©”ë‰´ì—ì„œ â‘  ë‹¨ê³„ë¶€í„° ìˆœì„œëŒ€ë¡œ ì§„í–‰í•˜ì„¸ìš”!")
    st.session_state.first_visit_done = True
